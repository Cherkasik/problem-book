(this["webpackJsonpproblem-book"]=this["webpackJsonpproblem-book"]||[]).push([[0],{51:function(e,t,n){"use strict";n.r(t);var a,i,c,r,s,o,l,d,j,b,u,x,p,h,O,g,m,f,v,w,k,S,y,C,D,I,T=n(1),F=n.n(T),A=n(8),L=n.n(A),E=n(2),P=n(4),_=n(3),q=n(6),z=n.n(q),B=n.p+"static/media/logo.47644d92.svg",J=n.p+"static/media/admin.9385f271.svg",M=n(23),N=(n(48),n.p+"static/media/cross.47eb640c.svg"),U=n(0),V=_.b.div(a||(a=Object(E.a)(["\n  width: calc(100% - 20px);\n  display: flex;\n  justify-content: space-between;\n  line-height: 20px;\n  background-color: aquamarine;\n  padding: 10px;\n"]))),R=_.b.div(i||(i=Object(E.a)(["\n  width: calc(100% - 20px);\n  line-height: 20px;\n  background-color: white;\n  padding: 10px;\n  color: red;\n  form { color: black; }\n"]))),G=_.b.img(c||(c=Object(E.a)(["\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  margin-left: 20px;\n"]))),H=function(e){var t=e.children,n=e.isOpen,a=e.setOpen,i=e.header;return Object(U.jsxs)(M.a,{open:n,center:!0,onClose:function(){return a(!1)},closeOnOverlayClick:!0,closeOnEsc:!0,showCloseIcon:!1,focusTrapped:!1,styles:{modal:{padding:0,width:"500px"}},children:[Object(U.jsxs)(V,{children:[i,Object(U.jsx)(G,{src:N,onClick:function(){return a(!1)}})]}),Object(U.jsx)(R,{children:t})]})},K=_.b.div(r||(r=Object(E.a)(["\n  width: calc(100% - 40px);\n  height: 60px;\n  position: sticky;\n  background-color: aquamarine;\n  padding: 0 20px;\n  display: flex;\n  justify-content: space-between;\n  \n  img {\n    width: 40px;\n    height: 40px;\n  }\n"]))),Q=_.b.div(s||(s=Object(E.a)(["\n  text-decoration: none;\n  color: black;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  font-weight: bold;\n"]))),W=_.b.button(o||(o=Object(E.a)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  font-size: 16px;\n  font-weight: bold;\n"]))),X=_.b.label(l||(l=Object(E.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1;\n  input {\n    width: 100%;\n    margin-top: 10px;\n  }\n  margin: 20px 0;\n"]))),Y=_.b.div(d||(d=Object(E.a)(["\n  color: red;\n  width: 100%;\n"]))),Z={username:"",password:""},$=function(e){var t=e.loggedIn,n=e.logOut,a=e.logIn,i=Object(T.useState)(!1),c=Object(P.a)(i,2),r=c[0],s=c[1],o=Object(T.useState)(Z),l=Object(P.a)(o,2),d=l[0],j=l[1];return Object(U.jsxs)(K,{children:[Object(U.jsxs)(Q,{to:"/",children:[Object(U.jsx)("img",{src:B,alt:""}),"Problem Book"]}),Object(U.jsxs)(W,{onClick:function(){j(""),t?n():s(!0)},children:[t?"Switch to user":"Switch to admin",Object(U.jsx)("img",{src:J,alt:""})]}),Object(U.jsx)(H,{isOpen:r,setOpen:s,header:"Log in as admin",children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),j(Z);var t=new FormData;t.set("username",e.target.login.value),t.set("password",e.target.password.value),z.a.post("/login?developer=Cherkasik",t).then((function(e){"error"!==e.data.status?(a(e.data.message.token),s(!1)):j(e.data.message)}))},children:[Object(U.jsxs)(X,{children:["Login",Object(U.jsx)(Y,{children:d.username}),Object(U.jsx)("input",{name:"login"})]}),Object(U.jsxs)(X,{children:["Password",Object(U.jsx)(Y,{children:d.password}),Object(U.jsx)("input",{name:"password"})]}),Object(U.jsx)("button",{type:"submit",children:"Login"})]})})]})},ee=n.p+"static/media/down-arrow.20d70776.svg",te=n.p+"static/media/plus.2a3feb59.svg",ne=_.b.div(j||(j=Object(E.a)(["\n  width: 100%;\n  max-width: 1000px;\n  height: calc(100% - 80px);\n  margin: auto;\n"]))),ae=_.b.div(b||(b=Object(E.a)(["\n  width: 100%;\n  font-size: 40px;\n  margin-top: 20px;\n  display: flex;\n  justify-content: space-between;\n  flex-direction: row;\n  p {\n    margin: 0;\n  }\n"]))),ie=_.b.div(u||(u=Object(E.a)(["\n  width: 100%;\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: row;\n"]))),ce=_.b.img(x||(x=Object(E.a)(["\n  width: 20px;\n  height: 20px;\n  margin-left: 10px;\n  cursor: pointer;\n"]))),re=_.b.img(p||(p=Object(E.a)(["\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n  ","\n  transition: transform 0.3s ease;\n"])),(function(e){return e.rotateArrow&&"transform: rotate(180deg);"})),se=_.b.label(h||(h=Object(E.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1;\n  input {\n    width: 100%;\n    margin-top: 10px;\n  }\n  margin: 20px 0;\n"]))),oe=_.b.div(O||(O=Object(E.a)(["\n  color: red;\n  width: 100%;\n"]))),le=_.b.select(g||(g=Object(E.a)(["\n  margin-right: 10px;\n  height: 20px;\n  width: 100px;\n"]))),de={username:"",email:"",text:""},je=function(e){var t=e.children,n=e.changeSortDirection,a=e.rotateArrow,i=e.getTasks,c=e.sortField,r=e.setSortField,s=Object(T.useState)(!1),o=Object(P.a)(s,2),l=o[0],d=o[1],j=Object(T.useState)(de),b=Object(P.a)(j,2),u=b[0],x=b[1];return Object(U.jsxs)(ne,{children:[Object(U.jsxs)(ae,{children:[Object(U.jsx)("p",{children:"Task list"}),Object(U.jsxs)("div",{children:[Object(U.jsxs)(le,{value:c,onChange:function(e){return r(e.target.value)},children:[Object(U.jsx)("option",{value:"id",children:"id"}),Object(U.jsx)("option",{value:"username",children:"username"}),Object(U.jsx)("option",{value:"email",children:"email"}),Object(U.jsx)("option",{value:"status",children:"status"})]}),Object(U.jsx)(re,{rotateArrow:a,onClick:n,src:ee}),Object(U.jsx)(ce,{onClick:function(){x(de),d(!0)},src:te}),Object(U.jsx)(H,{setOpen:d,isOpen:l,header:"Create task",children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),x(de);var t=new FormData;t.set("username",e.target.username.value),t.set("email",e.target.email.value),t.set("text",e.target.text.value),z.a.post("/create?developer=Cherkasik",t).then((function(e){"error"!==e.data.status?(i(),d(!1)):x(e.data.message)}))},children:[Object(U.jsxs)(se,{children:["Username",Object(U.jsx)(oe,{children:u.username}),Object(U.jsx)("input",{name:"username"})]}),Object(U.jsxs)(se,{children:["Email",Object(U.jsx)(oe,{children:u.email}),Object(U.jsx)("input",{name:"email"})]}),Object(U.jsxs)(se,{children:["Text",Object(U.jsx)(oe,{children:u.text}),Object(U.jsx)("input",{name:"text"})]}),Object(U.jsx)("button",{type:"submit",children:"Save"})]})})]})]}),Object(U.jsx)(ie,{children:t})]})},be=n.p+"static/media/edit.3a5b0553.svg",ue=_.b.form(m||(m=Object(E.a)(["\n  display: flex;\n  flex-direction: column;\n  max-width: 260px;\n  width: 100%;\n  margin: 10px;\n  padding: 20px;\n  border: 1px solid black;\n  ","\n"])),(function(e){return e.done&&"\n    background-color: green;\n    color: white;\n  "})),xe=_.b.div(f||(f=Object(E.a)(["\n  max-height: 100px;\n  min-height: 50px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  line-height: 20px;\n"]))),pe=_.b.div(v||(v=Object(E.a)(["\n  width: 100%;\n  min-height: 200px;\n  margin-top: 20px;\n"]))),he=_.b.div(w||(w=Object(E.a)(["\n  p {\n    width: 100%;\n    margin: 0;\n  }\n"]))),Oe=_.b.div(k||(k=Object(E.a)(["\n  p {\n    width: 100%;\n    margin: 0;\n  }\n"]))),ge=_.b.img(S||(S=Object(E.a)(["\n  width: 20px;\n  height: 20px;\n  cursor: pointer;\n"]))),me=_.b.label(y||(y=Object(E.a)(["\n  display: flex;\n  flex-wrap: wrap;\n  flex: 1;\n  input {\n    width: 100%;\n    margin-top: 10px;\n  }\n  margin: 20px 0;\n"]))),fe=_.b.div(C||(C=Object(E.a)(["\n  color: red;\n  width: 100%;\n"]))),ve={text:"",status:""},we=function(e){var t=e.name,n=e.email,a=e.text,i=e.status,c=e.isLoggedIn,r=e.updateCard,s=e.getTasks,o=Object(T.useState)(!1),l=Object(P.a)(o,2),d=l[0],j=l[1],b=Object(T.useState)(ve),u=Object(P.a)(b,2),x=u[0],p=u[1];return Object(U.jsxs)(ue,{done:i>=10,children:[Object(U.jsxs)(xe,{children:[Object(U.jsxs)(he,{children:[Object(U.jsx)("p",{children:t}),Object(U.jsx)("p",{children:n})]}),Object(U.jsxs)(Oe,{children:[Object(U.jsx)("p",{children:i}),c&&Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ge,{src:be,onClick:function(){p(ve),j(!0)}}),Object(U.jsx)(H,{setOpen:j,isOpen:d,header:"Create task",children:Object(U.jsxs)("form",{onSubmit:function(e){e.preventDefault(),p(ve);var t=r(e.target.text.value,e.target.status.value);t&&t.then((function(e){"ok"===e.data.status&&(s(),j(!1))}))},children:[Object(U.jsxs)(me,{children:["Text",Object(U.jsx)(fe,{children:x.text}),Object(U.jsx)("input",{defaultValue:a,name:"text"})]}),Object(U.jsxs)(me,{children:["Status",Object(U.jsx)(fe,{children:x.status}),Object(U.jsxs)("select",{defaultValue:i,name:"status",children:[Object(U.jsx)("option",{value:"0",children:"Task not done"}),Object(U.jsx)("option",{value:"1",children:"Task not done, edited"}),Object(U.jsx)("option",{value:"10",children:"Task done"}),Object(U.jsx)("option",{value:"11",children:"Task done, edited"})]})]}),Object(U.jsx)("button",{type:"submit",children:"Save"})]})})]})]})]}),Object(U.jsx)(pe,{children:a})]})},ke=_.b.div(D||(D=Object(E.a)(["\n  width: 100%;\n"]))),Se=function(e){var t=e.pageNumber,n=e.currentPage,a=e.onChange;return 0===t?null:Object(U.jsx)(ke,{children:Object(U.jsx)("select",{value:n,onChange:a,children:Array.from(Array(t).keys()).map((function(e){return Object(U.jsx)("option",{value:e+1,children:e+1},e)}))})})};var ye=Object(_.a)(I||(I=Object(E.a)(["\n  html, body, #root {\n    height: 100%;\n    width: 100%;\n  }\n  body {\n    margin: 0;\n  }\n"]))),Ce=function(){var e,t=Object(T.useState)(!1),n=Object(P.a)(t,2),a=n[0],i=n[1],c=Object(T.useState)({}),r=Object(P.a)(c,2),s=r[0],o=r[1],l=Object(T.useState)(!0),d=Object(P.a)(l,2),j=d[0],b=d[1],u=Object(T.useState)("id"),x=Object(P.a)(u,2),p=x[0],h=x[1],O=Object(T.useState)(1),g=Object(P.a)(O,2),m=g[0],f=g[1],v=function(){z.a.get("/?developer=Cherkasik&sort_direction=".concat(j?"asc":"desc","&page=").concat(m,"&sort_field=").concat(p)).then((function(e){return o(e.data.message)}))},w=function(){return new Date(localStorage.getItem("expireDate"))<=new Date};return Object(T.useEffect)((function(){if(z.a.defaults.baseURL="https://uxcandy.com/~shapoval/test-task-backend/v2",localStorage.getItem("token")){if(w())return localStorage.clear(),void i(!1);i(!0)}}),[]),Object(T.useEffect)((function(){v()}),[j,m,p]),Object(U.jsxs)(U.Fragment,{children:[Object(U.jsx)(ye,{}),Object(U.jsx)($,{loggedIn:a,logOut:function(){localStorage.clear(),i(!1)},logIn:function(e){var t=new Date;t.setDate(t.getDate()+1),localStorage.setItem("token",e),localStorage.setItem("expireDate",t.toString()),i(!0)}}),Object(U.jsxs)(je,{changeSortDirection:function(){return b(!j)},rotateArrow:j,getTasks:function(){f(1),v()},sortField:p,setSortField:h,children:[null===(e=s.tasks)||void 0===e?void 0:e.map((function(e){return Object(U.jsx)(we,{isLoggedIn:a,name:e.username,email:e.email,status:e.status,text:e.text,updateCard:function(t,n){return function(e,t,n){if(w())return i(!1),null;var a=new FormData;return a.set("token",localStorage.getItem("token")),a.set("text",t),a.set("status",n),z.a.post("/edit/".concat(e,"?developer=Cherkasik"),a)}(e.id,t,n)},getTasks:v},e.id)})),Object(U.jsx)(Se,{pageNumber:Math.ceil(s.total_task_count/3)||0,currentPage:m,onChange:function(e){return f(parseInt(e.target.value,10))}})]})]})};L.a.render(Object(U.jsx)(F.a.StrictMode,{children:Object(U.jsx)(Ce,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.d22dc89f.chunk.js.map